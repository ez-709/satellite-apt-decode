import requests

url = "https://celestrak.org/NORAD/elements/gp.php?NAME=NOAA&FORMAT=TLE"


#дописать код на случай если тле начинается с первой или второй строки
def get_not_deb_tle(url):
    '''
    фугкция собирает данные по указанному url, отсекая космический мусор DEB
    возвращает список списков TLE
    '''
    '''
    data = requests.get(url)
    if data.status_code == 200:
        tle_data = data.text
        
        lines = tle_data.split('\n')
        tles = []
        if lines[0][0] != 1 or lines[0][0] != 2:
            for index_line in range(0, len(lines) - 2, 3):
                if "DEB" in lines[index_line]:
                    continue
                else:
                    tles.append([lines[index_line], lines[index_line + 1], lines[index_line + 2]])

            return tles

    else:
        return f"Ошибка загрузки данных. Код ошибки: {data.status_code}"
        '''
    
    tles = [['NOAA 1                  \r', '1 04793U 70106A   25180.60933385 -.00000036  00000+0  42680-4 0  9993\r', '2 04793 101.3883 224.9091 0031073 318.7248 158.2832 12.54043649496492\r'], ['NOAA 2 (ITOS-D)         \r', '1 06235U 72082A   25180.60929501 -.00000040  00000+0  39147-4 0  9995\r', '2 06235 102.0205 190.0782 0004494 119.7793 349.7763 12.53201731410787\r'], ['NOAA 3                  \r', '1 06920U 73086A   25180.59411517 -.00000042  00000+0  32103-4 0  9999\r', '2 06920 102.2882 186.1058 0006869  55.3540  59.9628 12.40383356338189\r'], ['NOAA 4                  \r', '1 07529U 74089A   25180.58789113 -.00000045  00000+0  76178-5 0  9992\r', '2 07529 102.0029 184.6264 0009255 146.6764 326.2855 12.53195149315353\r'], ['NOAA 5                  \r', '1 09057U 76077A   25180.56173955 -.00000021  00000+0  19362-3 0  9992\r', '2 09057 102.2581 160.1284 0009248 265.6493 207.6260 12.37818965210840\r'], ['NOAA 6                  \r', '1 11416U 79057A   25180.56876564  .00000189  00000+0  81549-4 0  9992\r', '2 11416  98.5980 206.9358 0009145 218.0802 141.9737 14.35192524400379\r'], ['NOAA 7                  \r', '1 12553U 81059A   25180.58164340  .00000036  00000+0  39513-4 0  9999\r', '2 12553  98.8428 245.2239 0011234 191.4826 168.6094 14.17710066274781\r'], ['NOAA 8                  \r', '1 13923U 83022A   25180.56037168  .00000063  00000+0  42141-4 0  9999\r', '2 13923  98.7363 187.5355 0014229 206.0037 154.0431 14.29639258200689\r'], ['NOAA 9                  \r', '1 15427U 84123A   25180.58363116  .00000060  00000+0  53236-4 0  9994\r', '2 15427  99.1209 193.5620 0013585 268.4083 203.7374 14.16931082 93485\r'], ['NOAA 10                 \r', '1 16969U 86073A   25180.58861705  .00000056  00000+0  39851-4 0  9991\r', '2 16969  98.6746 169.8744 0011161 311.7408 158.7904 14.29013400 19307\r'], ['NOAA 11                 \r', '1 19531U 88089A   25180.49783550  .00000016  00000+0  29645-4 0  9995\r', '2 19531  98.5718 133.6253 0010156 226.8128 133.2198 14.15750053897578\r'], ['NOAA 12                 \r', '1 21263U 91032A   25180.57149578  .00000024  00000+0  27907-4 0  9995\r', '2 21263  98.5878 169.9351 0013278 343.7306  16.3446 14.26614911774683\r'], ['NOAA 13                 \r', '1 22739U 93050A   25180.46262966  .00000045  00000+0  46410-4 0  9994\r', '2 22739  98.6571 130.8084 0010490  59.5150 300.7057 14.13532872643544\r'], ['NOAA 14                 \r', '1 23455U 94089A   25180.53836925  .00000019  00000+0  31311-4 0  9998\r', '2 23455  98.4646 162.3281 0009926  24.0280 336.1355 14.14588614573343\r'], ['NOAA 15                 \r', '1 25338U 98030A   25180.58467013  .00000135  00000+0  73033-4 0  9999\r', '2 25338  98.5340 205.2335 0009149 304.7220  55.3099 14.26989379411008\r'], ['NOAA 16                 \r', '1 26536U 00055A   25180.60020203  .00000035  00000+0  40182-4 0  9997\r', '2 26536  98.4871 208.0785 0009500 229.3209 130.7140 14.13812507573904\r'], ['NOAA 17                 \r', '1 27453U 02032A   25180.60521350  .00000083  00000+0  53783-4 0  9996\r', '2 27453  98.8134 138.2000 0010611 296.7587  63.2506 14.26022335196739\r'], ['NOAA 18                 \r', '1 28654U 05018A   25180.58211705  .00000053  00000+0  51411-4 0  9997\r', '2 28654  98.8424 259.8337 0015281  74.6168 285.6691 14.13615468 36496\r'], ['NOAA 19                 \r', '1 33591U 09005A   25180.59180494  .00000122  00000+0  89250-4 0  9993\r', '2 33591  98.9966 245.4080 0012831 310.0023  50.0022 14.13382763844673\r'], ['NOAA 20 (JPSS-1)        \r', '1 43013U 17073A   25180.57515194  .00000040  00000+0  39947-4 0  9991\r', '2 43013  98.7417 118.8951 0000785 148.9824 211.1399 14.19512124394448\r'], ['NOAA 21 (JPSS-2)        \r', '1 54234U 22150A   25180.54084104  .00000029  00000+0  34600-4 0  9997\r', '2 54234  98.7273 119.1261 0002652 103.6431 256.5041 14.19541404136512\r']]

    return tles
    
tle_data = get_not_deb_tle(url)

for tle in tle_data:
    print(f'Спутник: {tle[0].strip()}, год tle: {tle[1][18:20]}')